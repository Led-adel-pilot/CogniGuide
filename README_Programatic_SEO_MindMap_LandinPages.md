# Programmatic SEO Mind Map Landing Pages - Implementation Details

## Overview
This document describes the programmatic SEO system for CogniGuide's mind map landing pages. It mirrors the flashcard setup (`README_Programatic_SEO_Flashcard_LandinPages.md`) but swaps in mind-map specific templates, scripts, and data flows.

## Architecture Components

### 1. Data Definition (`data/mindmap_pages.csv`)
Defines each landing page target. Required columns:
- `slug`: URL slug (e.g., `research-synthesis-mind-map`)
- `target_keyword`: Core keyword
- Optional columns (audience, topic, intent, etc.) become structured prompt context.

### 2. Content Generator (`scripts/generate_programmatic_mindmaps.py`)
AI automation that:
- Reads the CSV and validates inputs.
- Builds reasoning-rich prompts for Gemini via the OpenAI SDK.
- Enforces the `ProgrammaticMindMapPage` JSON schema.
- Injects breadcrumb context from `data/mindmap_taxonomy.json`.
- Normalizes outputs (canonical URLs, linking recommendations, placeholder related links).
- Emits TypeScript: `lib/programmatic/generated/mindMapPages.ts`.

Key CLI flags are equivalent to the flashcard script (`--input`, `--output`, `--model`, `--temperature`, `--rerun-existing`, etc.).

### 3. Type System (`lib/programmatic/mindMapPageSchema.ts`)
Shared types imported from the flashcard schema plus the `ProgrammaticMindMapPage` interface and `ProgrammaticEmbeddedMindMap` definition used by the React template.

### 4. Generated Content (`lib/programmatic/generated/mindMapPages.ts`)
Autogenerated TypeScript array of `ProgrammaticMindMapPage` objects. Do not edit manually—rerun the generator when CSV rows change.

### 5. Page Runtime Helpers (`lib/programmatic/mindMapPages.ts`)
Provides:
- `defaultMindMapLanding`: canonical `/ai-mind-map-generator` data.
- `getProgrammaticMindMapPage(slug)` lookup.
- `allMindMapPages` (default + generated) for sitemap inclusion.
- Automatic JSON-LD (breadcrumbs + FAQ) for every page.

### 6. React Template (`components/MindMapProgrammaticLanding.tsx`)
Custom skeleton modeled after the flashcard template but with:
- `EmbeddedMindMap` preview fed solely by `embeddedMindMap.markdown` (no separate title/description fields—use the first parent branch as the visible title).
- Mind-map specific CTA copy and footer links.
- Shared navigation, hero typography calculations, FAQ grid, etc.

### 7. Routing (`app/mind-maps/[slug]/page.tsx`)
Next.js dynamic route that:
- Generates static params for every generated slug.
- Builds metadata via `buildProgrammaticMetadata`.
- Renders `<MindMapProgrammaticLanding page={page} />` or 404s when missing.

### 8. Metadata (`lib/programmatic/metadata.ts`)
Now accepts both flashcard and mind map page interfaces to produce canonical metadata, OG tags, and Twitter cards.

### 9. Sitemaps (`lib/seo/sitemapSections.ts`)
`getProgrammaticLandingSitemapEntries()` now emits URLs for both flashcard and mind map landings so `/sitemap.xml` and `/sitemaps/sitemap-landings.xml` stay in sync.

## Workflow
1. Add or update rows in `data/mindmap_pages.csv`.
2. Run `python scripts/generate_programmatic_mindmaps.py --input data/mindmap_pages.csv --output lib/programmatic/generated/mindMapPages.ts`.
3. Commit the regenerated TypeScript along with any CSV changes.
4. Deploy—Next.js statically renders the new `/mind-maps/{slug}` routes.

The script defaults to the Gemini Flash Lite endpoint. Provide `--api-key` or rely on `GEMINI_API_KEY`. Use `--max-rows`/`--max-api-calls` for dry runs.
