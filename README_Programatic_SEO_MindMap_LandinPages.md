# Programmatic SEO Mind Map Landing Pages - Implementation Details

## Overview
This document describes the programmatic SEO system for CogniGuide's mind map landing pages. It mirrors the flashcard setup (`README_Programatic_SEO_Flashcard_LandinPages.md`) but swaps in mind-map specific templates, scripts, and data flows.

## Architecture Components

### 1. Data Definition (`data/mindmap_pages.csv`)
Defines each landing page target. Required columns:
- `slug`: URL slug (e.g., `research-synthesis-mind-map`)
- `target_keyword`: Core keyword
- Optional columns (audience, topic, intent, etc.) become structured prompt context.

### 2. Content Generator (`scripts/generate_programmatic_mindmaps.py`)
AI automation that:
- Reads the CSV and validates inputs.
- Builds reasoning-rich prompts for Gemini via the OpenAI SDK.
- Enforces the `ProgrammaticMindMapPage` JSON schema.
- Injects breadcrumb context from `data/mindmap_taxonomy.json`.
- Normalizes outputs (canonical URLs, linking recommendations, placeholder related links).
- Uses the CSV-provided slug directly for paths/canonicals—no AI-generated slugs.
- Emits TypeScript: `lib/programmatic/generated/mindMapPages.ts`.

Key CLI flags are equivalent to the flashcard script (`--input`, `--output`, `--model`, `--temperature`, `--rerun-existing`, etc.).

### 3. Type System (`lib/programmatic/mindMapPageSchema.ts`)
Shared types imported from the flashcard schema plus the `ProgrammaticMindMapPage` interface and `ProgrammaticEmbeddedMindMap` definition used by the React template.

### 4. Generated Content (`lib/programmatic/generated/mindMapPages.ts`)
Autogenerated TypeScript array of `ProgrammaticMindMapPage` objects. Do not edit manually—rerun the generator when CSV rows change.

### 5. Page Runtime Helpers (`lib/programmatic/mindMapPages.ts`)
Provides:
- `defaultMindMapLanding`: canonical `/ai-mind-map-generator` data.
- `getProgrammaticMindMapPage(slug)` lookup.
- `allMindMapPages` (default + generated) for sitemap inclusion.
- Automatic JSON-LD (breadcrumbs + FAQ) for every page.

### 6. React Template (`components/MindMapProgrammaticLanding.tsx`)
Custom skeleton modeled after the flashcard template but with:
- `EmbeddedMindMap` preview fed solely by `embeddedMindMap.markdown` (no separate title/description fields—use the first parent branch as the visible title).
- Mind-map specific CTA copy and footer links.
- Shared navigation, hero typography calculations, FAQ grid, etc.

### 7. Routing (`app/mind-maps/[[...slug]]/page.tsx`)
Catch-all route that:
- Serves the `/mind-maps` pillar page with cards linking only to hub pages.
- Renders hub pages at `/mind-maps/{hub}` and subhub directories at `/mind-maps/{hub}/{subhub}`, each pulling link text/description from `lib/programmatic/generated/mindMapPages.ts`.
- Subhub pages link directly to each landing’s canonical path (from the generator) under `/mind-maps/{slug}`.
- Empty hubs/subhubs are suppressed from routing, navigation, and sitemaps until they have at least one generated mind map landing.
- Builds metadata via `buildProgrammaticMetadata` for individual landings and uses hub/subhub defaults for hierarchy pages.
- Includes structured data injection when landing pages already have `structuredData` populated.

### 8. Metadata (`lib/programmatic/metadata.ts`)
Now accepts both flashcard and mind map page interfaces to produce canonical metadata, OG tags, and Twitter cards.

### 9. Sitemaps (`lib/seo/sitemapSections.ts`)
`getProgrammaticLandingSitemapEntries()` now emits URLs for both flashcard and mind map landings so `/sitemap.xml` and `/sitemaps/sitemap-landings.xml` stay in sync.

### 10. Taxonomy & Hubs (`data/mindmap_taxonomy.json`)
Mind map slugs are grouped into hubs/subhubs (mirroring the flashcard taxonomy flow) to power breadcrumbs, internal navigation, and sitemap priority. The taxonomy file is derived from `data/mindmap_pages.csv` with broad buckets:
- **Skills & Resources**: Apps/tools, how-to/benefits, templates/examples.
- **Academic & Study**: CBSE/K-12 chapters, subjects/courses, study skills.
- **Business & Professional**: Strategy/marketing, projects/ops, career skills.
- **General Topic Mind Maps**: Alphabetical fallback subhubs (Topics 0-9, A-F, G-L, M-R, S-Z) to ensure coverage for all 9k+ slugs.
- `lib/programmatic/mindMapUseCaseData.ts` converts the taxonomy into hub/subhub objects with anchor text/description sourced from the generated mind map pages, powering the `/mind-maps/{hub}` and `/mind-maps/{hub}/{subhub}` experiences.

### 11. Taxonomy Assignment Helper (`scripts/assign_subhubs.py`)
Extends the flashcard assignment utility to mind maps. Scores ungrouped slugs against subhubs using slug tokens, metadata, embedded mind map markdown, and keyword overlap.
- Flashcards: `python3 scripts/assign_subhubs.py --content-type flashcards`
- Mind maps: `python3 scripts/assign_subhubs.py --content-type mindmaps`
Defaults (pages file, taxonomy path, fallback hub/subhub) switch automatically per content type. Use `--report-existing` to audit low-confidence mappings without writing changes.

### 12. Related Topics Link Updater (`scripts/update_related_topics.py`)
Replaces placeholder related links with data-driven internal links using keyword and slug similarity.
- Flashcards: `python3 scripts/update_related_topics.py --content-type flashcards`
- Mind maps: `python3 scripts/update_related_topics.py --content-type mindmaps`
Mind map runs look for `/` or `/mind-maps` placeholders in `lib/programmatic/generated/mindMapPages.ts` and backfill up to three relevant peers per page.

## Workflow
1. Add or update rows in `data/mindmap_pages.csv`.
2. Run `python scripts/generate_programmatic_mindmaps.py --input data/mindmap_pages.csv --output lib/programmatic/generated/mindMapPages.ts`.
3. Assign hubs/subhubs for any new slugs: `python3 scripts/assign_subhubs.py --content-type mindmaps`.
4. Update related links: `python3 scripts/update_related_topics.py --content-type mindmaps`.
3. Commit the regenerated TypeScript along with any CSV changes.
4. Deploy—Next.js statically renders the new `/mind-maps/{slug}` routes.

The script defaults to the Gemini Flash Lite endpoint. Provide `--api-key` or rely on `GEMINI_API_KEY`. Use `--max-rows`/`--max-api-calls` for dry runs.
